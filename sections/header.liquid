<script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'details-modal.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>


{% case section.settings.header_type %}

  {% when 'header1' %}
    <{% if section.settings.enable_sticky_header %}sticky-header{% else %}div{% endif %} class="header-wrapper">
    <header class="header header-1">

      <ul class="header-1__collections-nav">
        {%- if section.settings.menu != blank -%}
          {%- for link in section.settings.menu.links -%}
            {%- if link.links == blank -%}
            <li class="header-1__collection-link"><a href="{{ link.url }}" class="header-1__collection-link">{{ link.title | escape }}</a></li>
            {% else %}
              <li class="header-1__collection-link"><a href="{{ link.url }}">{{ link.title | escape }} <i class="fas fa-chevron-down"></i></a>
                <ul class="collection-link__sub-links">
                  {%- for childlink in link.links -%}
                  <li><a href="{{ childlink.url }}">{{ childlink.title | escape }}</a></li>
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
      </ul>
      
      <div class="header-1__logo">
        <a href="{{ routes.root_url }}">
          {%- if section.settings.logo != blank -%}
            {%- assign image_size = section.settings.logo_width | append: 'x' -%}
            <img srcset="{{ section.settings.logo | img_url: image_size }} 1x, {{ section.settings.logo | img_url: image_size, scale: 2 }} 2x"
              src="{{ section.settings.logo | img_url: image_size }}"
              loading="lazy"
              class="header__heading-logo"
              width="{{ section.settings.logo.width }}"
              height="{{ section.settings.logo.height }}"
              alt="{{ section.settings.logo.alt | default: shop.name | escape }}"
            >
          {%- else -%}
            <span>{{ shop.name }}</span>
          {%- endif -%}
        </a>
      </div>

      <ul class="header-1__collections-nav">
        {%- if section.settings.menu_two != blank -%}
          {%- for link in section.settings.menu_two.links -%}
            {%- if link.links == blank -%}
            <li class="header-1__collection-link"><a href="{{ link.url }}" class="header-1__collection-link">{{ link.title | escape }}</a></li>
            {% else %}
              <li class="header-1__collection-link"><a href="{{ link.url }}">{{ link.title | escape }} <i class="fas fa-chevron-down"></i></a>
                <ul class="collection-link__sub-links">
                  {%- for childlink in link.links -%}
                  <li><a href="{{ childlink.url }}">{{ childlink.title | escape }}</a></li>
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
        <a href="{{ routes.cart_url }}" class="header-1__collection-link">
          <i class="fas fa-shopping-cart"></i>
        </a>
        {%- if shop.customer_accounts_enabled -%}
          <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header-1__collection-link">
            <i class="fas fa-user"></i>
          </a>
        {%- endif -%}
      </ul>
    </header>
    </{% if section.settings.enable_sticky_header %}sticky-header{% else %}div{% endif %}>

  {% when 'header2' %}
    <{% if section.settings.enable_sticky_header %}sticky-header{% else %}div{% endif %} class="header-wrapper">
    <header class="header header-2 ">
      <div class="header-2__logo">
        <a href="{{ routes.root_url }}">
          {%- if section.settings.logo != blank -%}
            {%- assign image_size = section.settings.logo_width | append: 'x' -%}
            <img srcset="{{ section.settings.logo | img_url: image_size }} 1x, {{ section.settings.logo | img_url: image_size, scale: 2 }} 2x"
              src="{{ section.settings.logo | img_url: image_size }}"
              loading="lazy"
              class="header__heading-logo"
              width="{{ section.settings.logo.width }}"
              height="{{ section.settings.logo.height }}"
              alt="{{ section.settings.logo.alt | default: shop.name | escape }}"
            >
          {%- else -%}
            <span>{{ shop.name }}</span>
          {%- endif -%}
        </a>
      </div>

      <ul class="header-2__collections-nav">
        {%- if section.settings.menu != blank -%}
          {%- for link in section.settings.menu.links -%}
            {%- if link.links == blank -%}
            <li class="header-2__collection-link"><a href="{{ link.url }}" class="header-2__collection-link">{{ link.title | escape }}</a></li>
            {% else %}
              <li class="header-2__collection-link"><a href="{{ link.url }}">{{ link.title | escape }} <i class="fas fa-chevron-down"></i></a>
                <ul class="collection-link__sub-links">
                  {%- for childlink in link.links -%}
                  <li><a href="{{ childlink.url }}">{{ childlink.title | escape }}</a></li>
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
      </ul>

      <div class="header-2__collections-nav">
        <a href="{{ routes.cart_url }}" class="header-1__collection-link">
          <i class="fas fa-shopping-cart"></i>
        </a>
        {%- if shop.customer_accounts_enabled -%}
          <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header-2__collection-link">
            <i class="fas fa-user"></i>
          </a>
        {%- endif -%}
      </div>
    </header>
    </{% if section.settings.enable_sticky_header %}sticky-header{% else %}div{% endif %}>

  {% when 'header3' %}
    <{% if section.settings.enable_sticky_header %}sticky-header{% else %}div{% endif %} class="header-wrapper">

    <header class="header header-3">
      <div class="header-3__logo">
        <a href="{{ routes.root_url }}">
          {%- if section.settings.logo != blank -%}
            {%- assign image_size = section.settings.logo_width | append: 'x' -%}
            <img srcset="{{ section.settings.logo | img_url: image_size }} 1x, {{ section.settings.logo | img_url: image_size, scale: 2 }} 2x"
              src="{{ section.settings.logo | img_url: image_size }}"
              loading="lazy"
              class="header__heading-logo"
              width="{{ section.settings.logo.width }}"
              height="{{ section.settings.logo.height }}"
              alt="{{ section.settings.logo.alt | default: shop.name | escape }}"
            >
          {%- else -%}
            <span>{{ shop.name }}</span>
          {%- endif -%}
        </a>
      </div>
      <ul class="header-3__collections-nav">
        {%- if section.settings.menu != blank -%}
          {%- for link in section.settings.menu.links -%}
            {%- if link.links == blank -%}
            <li class="header-3__collection-link"><a href="{{ link.url }}" class="header-3__collection-link">{{ link.title | escape }}</a></li>
            {% else %}
              <li class="header-3__collection-link"><a href="{{ link.url }}">{{ link.title | escape }} <i class="fas fa-chevron-down"></i></a>
                <ul class="collection-link__sub-links">
                  {%- for childlink in link.links -%}
                  <li><a href="{{ childlink.url }}">{{ childlink.title | escape }}</a></li>
                  {% endfor %}
                </ul>
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
          <a href="{{ routes.cart_url }}" class="header-1__collection-link">
            <i class="fas fa-shopping-cart"></i>
          </a>
          {%- if shop.customer_accounts_enabled -%}
            <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header-3__collection-link">
              <i class="fas fa-user"></i>
            </a>
          {%- endif -%}
      </ul>
    </header>
  </{% if section.settings.enable_sticky_header %}sticky-header{% else %}div{% endif %}>
{% endcase %}

{% comment %} needed this to bring over the default sticky header {% endcomment %}
{% javascript %}
  class StickyHeader extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback() {
      this.header = document.getElementById('shopify-section-header');
      this.headerBounds = {};
      this.currentScrollTop = 0;
      this.preventReveal = false;

      this.onScrollHandler = this.onScroll.bind(this);
      this.hideHeaderOnScrollUp = () => this.preventReveal = true;

      this.addEventListener('preventHeaderReveal', this.hideHeaderOnScrollUp);
      window.addEventListener('scroll', this.onScrollHandler, false);

      this.createObserver();
    }

    disconnectedCallback() {
      this.removeEventListener('preventHeaderReveal', this.hideHeaderOnScrollUp);
      window.removeEventListener('scroll', this.onScrollHandler);
    }

    createObserver() {
      let observer = new IntersectionObserver((entries, observer) => {
        this.headerBounds = entries[0].intersectionRect;
        observer.disconnect();
      });

      observer.observe(this.header);
    }

    onScroll() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      if (this.preventReveal) {
        window.clearTimeout(this.isScrolling);

        this.isScrolling = setTimeout(() => {
          this.preventReveal = false;
        }, 66);

        requestAnimationFrame(this.hide.bind(this));
      } else {
        if (scrollTop > this.currentScrollTop && scrollTop > this.headerBounds.bottom) {
          requestAnimationFrame(this.hide.bind(this));
        } else if (scrollTop < this.currentScrollTop && scrollTop > this.headerBounds.bottom) {
          requestAnimationFrame(this.reveal.bind(this));
        } else if (scrollTop <= this.headerBounds.top) {
          requestAnimationFrame(this.reset.bind(this));
        }
      }

      this.currentScrollTop = scrollTop;
    }

    hide() {
      this.header.classList.add('shopify-section-header-hidden', 'shopify-section-header-sticky');
      this.closeMenuDisclosure();
      this.closeSearchModal();
    }

    reveal() {
      this.header.classList.add('shopify-section-header-sticky', 'animate');
      this.header.classList.remove('shopify-section-header-hidden');
    }

    reset() {
      this.header.classList.remove('shopify-section-header-hidden', 'shopify-section-header-sticky', 'animate');
    }

    closeMenuDisclosure() {
      this.disclosures = this.disclosures || this.header.querySelectorAll('details-disclosure');
      this.disclosures.forEach(disclosure => disclosure.close());
    }

    closeSearchModal() {
      this.searchModal = this.searchModal || this.header.querySelector('details-modal');
      this.searchModal.close(false);
    }
  }

  customElements.define('sticky-header', StickyHeader);
{% endjavascript %}


{% schema %}
{
  "name": "t:sections.header.name",
  "settings": [
    {
      "type": "select",
      "id": "header_type",
      "label": "Header Type",
      "options": [
        {
          "value": "header1",
          "label": "Header 1"
        },
        {
          "value": "header2",
          "label": "Header 2"
        },
        {
          "value": "header3",
          "label": "Header 3"
        }
      ],
      "default": "header1"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:sections.header.settings.logo.label"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "default": 100,
      "unit": "t:sections.header.settings.logo_width.unit",
      "label": "t:sections.header.settings.logo_width.label"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "t:sections.header.settings.menu.label"
    },
    {
      "type": "link_list",
      "id": "menu_two",
      "default": "main-menu",
      "label": "Alternate Menu"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_header",
      "default": true,
      "label": "t:sections.header.settings.enable_sticky_header.label",
      "info": "t:sections.header.settings.enable_sticky_header.info"
    }
  ]
}
{% endschema %}